<html>

<head>
    <title>Examples | Terrain</title>
    <script src="/src/aframe-v0.3.2.min.js"></script>
    <script src="/src/aframe-extras-v2.6.1.min.js"></script>
</head>

<body>
    <a-scene>
        
        <!-- Assets -->
        <a-assets>
<!--            <a-asset-item id="islandPly" src="ply/island.ply"></a-asset-item>            -->
            
            <!-- Island -->
            <a-asset-item id="islandObj" src="obj/island/island.obj"></a-asset-item>
            <a-asset-item id="islandMtl" src="obj/island/island.mtl"></a-asset-item>  
            
            <!-- Box -->
            <a-asset-item id="boxObj" src="obj/box/box.obj"></a-asset-item>
            <a-asset-item id="boxMtl" src="obj/box/box.mtl"></a-asset-item>
            
            <!-- Tree -->
            <a-asset-item id="treeObj" src="obj/tree/tree.obj"></a-asset-item>
            <a-asset-item id="treeMtl" src="obj/tree/tree.mtl"></a-asset-item>  
            
            <!-- Abstract -->
            <a-asset-item id="abstractDae" src="dae/abstract.dae"></a-asset-item>              
        </a-assets>
        
        <a-entity position="0 0 0" id="island_wrap">
            
            <!-- Camera -->
            <a-entity position="3.8 1.5 0" rotation="0 90 0">
                <a-camera look-controls wasd-controls>
                    <a-ring radius-outer="0.15" radius-inner="0.10" scale="0.1 0.1 0.1" position="0 0 -0.3" material="color: #a3a3a3; shader: flat; opacity: 0.8;" cursor="maxDistance: 30; fuse: false"></a-ring>                    
                </a-camera>
            </a-entity>            
            
            <!-- Island -->
    <!--        <a-entity position="0 -0.2 0" scale="0.5 0.5 0.5" ply-model="src: #islandPly" rotation="-90 0 0"></a-entity>-->
            <a-entity position="0 -0.2 0" scale="0.5 0.5 0.5" obj-model="obj: #islandObj; mtl: #islandMtl"></a-entity>        

            <!-- Box -->
            <a-entity position="-4.3 1.3 0" scale="0.4 0.4 0.4" obj-model="obj: #boxObj; mtl: #boxMtl"></a-entity>   

            <!-- Trees -->
            <a-entity id="trigger_tree" position="-4.3 1.3 4" rotation="0 90 0" scale="0.4 0.4 0.4" obj-model="obj: #treeObj; mtl: #treeMtl"></a-entity>            
            <a-entity position="-4.3 1.3 -5.6" rotation="0 90 0" scale="0.4 0.4 0.4" obj-model="obj: #treeObj; mtl: #treeMtl"></a-entity>             

            <a-collada-model position="-4.3 5.25 0" scale="0.6 0.6 0.6" color="#7b7bb7" src="#abstractDae"></a-collada-model>
            
            <!-- sinking island -->
            <a-animation attribute="position" from="0 0 0" to="0 -15 0" dur="15000" begin="sink"></a-animation>
        </a-entity>      
        
        <!-- Ocean -->
        <a-ocean width="150" depth="150" density="20" opacity="1" position="0 0 0"></a-ocean>

        <!-- Sky -->
        <a-sky color="#AADDF0"></a-sky>

        <!-- Lighting -->
        <a-light type="ambient" color="#ccc"></a-light>
        <a-light color="#ddf" distance="100" intensity="0.4" type="point"></a-light>
        <a-light color="#ddf" position="3 10 -10" distance="50" intensity="0.4" type="point"></a-light>

    </a-scene>
    
    <script>
        document.querySelector('#trigger_tree').addEventListener('click', function () { 
            console.log('island is sinking');
            document.querySelector('#island_wrap').emit('sink');            
        });
    </script>    
</body>

</html>